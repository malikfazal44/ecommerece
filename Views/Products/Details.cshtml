@model ecommerece.Models.Product

@{
    ViewData["Title"] = "Details";
}
<div class="row">
    <div class="col-6">
        <div class="row">
            <div class="col-12">
                @{
                    string[] AllImages = Model.ProductImg.Split(",");
                }
                @if (string.IsNullOrEmpty(AllImages[0]))
                {

                }
                else
                {
                
                <img src="@AllImages[0]" class="img img-fluid largeImg" style="max-height : 500px;" />
                }
                    
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                @for (int i = 0; i < AllImages.Length; i++)
                {
                    <img src="@AllImages[i]" class="img img-thumbnail smallImg" style="max-height : 50px;" />
                }
            </div>
        </div>
        
        
    </div>
<div class="col-6">
        <h1>Details</h1>

        <div>
            <h4 class="">Product</h4>
            <hr />
            <dl class="row">
                <dt class="col-sm-2">
                    Name
                    
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.ProductName)
                    <span id="viewCounter" class="badge bg-info"></span>
                    
                </dd>
                @*<dt class="col-sm-2">
                    Views

                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.NumOfViews)

                </dd>*@
                @*<dt class = "col-sm-2">
                @Html.DisplayNameFor(model => model.SellerId)
                </dt>
                <dd class = "col-sm-10">
                @Html.DisplayFor(model => model.SellerId)
                </dd>*@
                
                @*<dt class = "col-sm-2">
                @Html.DisplayNameFor(model => model.CatId)
                </dt>
                <dd class = "col-sm-10">
                @Html.DisplayFor(model => model.CatId)
                </dd>*@
                <dt class="col-sm-2">
                    Stock
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.Quantity)
                </dd>
                <dt class="col-sm-2">
                    About
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.ShortDecsc)
                </dd>
                <dt class="col-sm-2">
                    Description
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.LongDesc)
                </dd>
                <dt class="col-sm-2">
                    Price
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.ProductPrice)
                </dd>
                <dt class="col-sm-2">
                    Delivery Days
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.DeliveryDays)
                </dd>
                <dt class="col-sm-2">
                    Delivery Charges
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.DeliveryCharges)
                </dd>
                @*<dt class="col-sm-2">
                    @Html.DisplayNameFor(model => model.Status)
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.Status)
                </dd>*@
               
                
            </dl>
        </div>
        <div>
            <a asp-action="Edit" asp-route-id="@Model?.ProductId">Edit</a> |
            <a asp-action="Index">Back to List</a>
        </div>
</div>
</div>

<div id="RI" class="row">
    
</div>

@section Scripts{
    <script>

        $(function () {
            $(".smallImg").click(function () {

                var clickedImage = $(this);
                //alert(clickedImage.attr("src"));

                $(".largeImg").attr("src", clickedImage.attr("src"));
            });
        @*Ajax code starts. it prevents to load in DOM.*@

                $(function () {
                    //$('#counter').load('/Products/NumOfViews?id=@Model.ProductId');
                    $('#RI').load('/Products/GetRI?id=@Model.ProductId&cid=@Model.CatId');
                });
                $(function (){
                $('#viewCounter').load('/Products/NumOfViews?id=@Model.ProductId');
                });


            $.ajax({
                url: '/Products/GetCounter',
                type: 'post' ,
                data: {
                    id: '@Model.ProductId'
                }
            });
        });
    
    
    </script>
}


